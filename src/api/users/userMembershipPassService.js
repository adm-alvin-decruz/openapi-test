require("dotenv").config();

const cognitoService = require("../../services/cognitoService");
const userModel = require("../../db/models/userModel");
const userMembershipModel = require("../../db/models/userMembershipModel");
const userMembershipDetailsModel = require("../../db/models/userMembershipDetailsModel");
const userMigrationsMembershipPassesModel = require("../../db/models/UserMigrationsMembershipPassesModel");
const empMembershipUserPassesModel = require("../../db/models/EmpMembershipUserPassesModel");
const configsModel = require("../../db/models/ConfigsModel");
const loggerService = require("../../logs/logger");
const { uploadThumbnailToS3 } = require("../../services/s3Service");
const MembershipPassErrors = require("../../config/https/errors/membershipPassErrors");

const awsRegion = () => {
  const env = process.env.AWS_REGION_NAME;
  if (!env) return "ap-southeast-1";
  if (env === "false") return "ap-southeast-1";
  return env;
};

const { SQSClient, SendMessageCommand } = require("@aws-sdk/client-sqs");
const { getOrCheck } = require("../../utils/cognitoAttributes");
const MembershipErrors = require("../../config/https/errors/membershipErrors");
const { omit } = require("../../utils/common");
const sqsClient = new SQSClient({ region: awsRegion });

class UserMembershipPassService {
  async create(req) {
    const migrationsFlag = req.body && req.body.migrations;
    const userInfo = migrationsFlag
      ? await userModel.findByEmail(req.body.email)
      : null;
    const mandaiId =
      userInfo && userInfo.mandai_id ? userInfo.mandai_id : req.body.mandaiId;
    const passTypeMapping = await this.getPassType(req);
    try {
      const user = await userModel.findByEmailMandaiId(
        req.body.email,
        mandaiId
      );
      if (!user || !user.id) {
        req.body &&
          req.body.migrations &&
          (await empMembershipUserPassesModel.updateByEmail(req.body.email, {
            picked: 2,
          }));
        await Promise.reject(
          JSON.stringify(
            MembershipErrors.ciamMembershipUserNotFound(
              req.body.email,
              req.body.language
            )
          )
        );
      }

      const rows = await userModel.findByEmailMandaiIdVisualIds(
        [req.body.visualId],
        req.body.email,
        mandaiId
      );

      const userMembership = rows && rows.length > 0 ? rows[0] : undefined;
      if (userMembership && userMembership.visualId === req.body.visualId) {
        req.body &&
          req.body.migrations &&
          (await empMembershipUserPassesModel.updateByEmail(req.body.email, {
            picked: 2,
          }));
        await Promise.reject(
          JSON.stringify(
            MembershipPassErrors.membershipPassExistedError(
              req.body.email,
              req.body.language
            )
          )
        );
      }

      // store pass data in db
      const createMembershipRs = await this.saveUserMembershipPassToDB(
        user.id,
        {
          ...req,
          passType: passTypeMapping.toLowerCase(),
        }
      );

      // update user's cognito memberships info
      await this.updateMembershipInCognito(req);

      //TODO: implement retrieve membershipPhoto from NC
      //Current is fixed image in case migration running
      if (req.body.migrations) {
        await uploadThumbnailToS3({
          body: {
            membershipPhoto: {
              bytes:
                "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",
            },
            mandaiId: mandaiId,
            visualId: req.body.visualId,
          },
        });
        await userMembershipDetailsModel.updateByMembershipId(
          createMembershipRs.membershipId,
          {
            membership_photo: `users/${mandaiId}/assets/thumbnails/${req.body.visualId}.png`,
          }
        );
      }
      // upload member photo to S3
      if (req.body.membershipPhoto && req.body.membershipPhoto?.bytes) {
        await uploadThumbnailToS3(req);
        await userMembershipDetailsModel.updateByMembershipId(
          createMembershipRs.membershipId,
          {
            membership_photo: `users/${mandaiId}/assets/thumbnails/${req.body.visualId}.png`,
          }
        );
      }

      if (
        req.body.member &&
        req.body.member.firstName &&
        req.body.member.lastName &&
        req.body.member.dob
      ) {
        req.body &&
          req.body.migrations &&
          (await userMigrationsMembershipPassesModel.updateByEmailAndBatchNo(
            req.body.email,
            req.body.batchNo,
            {
              pass_request: true,
              co_member_request: true,
            }
          ));
        await this.sendSQSMessage(
          {
            ...req,
            body: {
              ...req.body,
              mandaiId: mandaiId,
              passType: passTypeMapping.toLowerCase(),
            },
          },
          "createMembershipPass"
        );
      } else {
        req.body &&
          req.body.migrations &&
          (await empMembershipUserPassesModel.updateByEmail(req.body.email, {
            picked: 1,
          }));
      }
    } catch (error) {
      req.body &&
        req.body.migrations &&
        (await empMembershipUserPassesModel.updateByEmail(req.body.email, {
          picked: 2,
        }));
      const errorMessage = error.message ? JSON.parse(error.message) : "";
      if (errorMessage.status === "failed") {
        throw new Error(
          JSON.stringify(
            MembershipPassErrors.createMembershipPassError(req.body.language)
          )
        );
      }
      throw new Error(error);
    }
  }

  async update(req) {
    try {
      // update pass data in db
      const updateMembershipRs = await this.updateUserMembershipPassToDB(req);

      // update pass expiry in cognito (if present in request)
      await this.updateMembershipInCognito(req);

      // update member photo in S3
      if (req.body.membershipPhoto && req.body.membershipPhoto?.bytes) {
        await uploadThumbnailToS3(req);
        await userMembershipDetailsModel.updateByMembershipId(
          updateMembershipRs.membershipId,
          {
            membership_photo: `users/${req.body.mandaiId}/assets/thumbnails/${req.body.visualId}.png`,
          }
        );
      }

      // send message to SQS to re-generate passkit
      if (
        req.body.member &&
        req.body.member.firstName &&
        req.body.member.lastName &&
        req.body.member.dob
      ) {
        await this.sendSQSMessage(req, "updateMembershipPass");
      }
    } catch (error) {
      const errorMessage = error.message ? JSON.parse(error.message) : "";
      if (errorMessage.status === "failed") {
        throw new Error(
          JSON.stringify(
            MembershipPassErrors.createMembershipPassError(req.body.language)
          )
        );
      }
      throw new Error(JSON.stringify(errorMessage));
    }
  }

  async createUserMembership(userId, { passType, visualId, validUntil }) {
    try {
      return await userMembershipModel.create({
        user_id: userId,
        name: passType,
        visual_id: visualId,
        expires_at: validUntil,
      });
    } catch (error) {
      loggerService.error(
        `userMembershipPassService.saveMembership Error: ${error} - userId: ${userId}`,
        { passType, visualId, validUntil }
      );
      throw new Error(
        JSON.stringify(MembershipPassErrors.createMembershipPassError())
      );
    }
  }

  async insertMembershipDetails(
    userId,
    membershipId,
    {
      categoryType,
      itemName,
      plu,
      adultQty,
      childQty,
      parking,
      iu,
      carPlate,
      membershipPhoto,
      firstName,
      lastName,
      email,
      dob,
      country,
      identificationNo,
      phoneNumber,
      coMember,
      validFrom,
      validUntil,
    }
  ) {
    try {
      return await userMembershipDetailsModel.create({
        user_id: userId,
        user_membership_id: membershipId,
        category_type: categoryType,
        item_name: itemName,
        plu: plu,
        adult_qty: adultQty,
        child_qty: childQty,
        parking: parking,
        iu: iu,
        car_plate: carPlate,
        membership_photo: membershipPhoto,
        member_first_name: firstName,
        member_last_name: lastName,
        member_email: email,
        member_dob: dob,
        member_country: country,
        member_identification_no: identificationNo,
        member_phone_number: phoneNumber,
        co_member: coMember,
        valid_from: validFrom,
        valid_until: validUntil,
      });
    } catch (error) {
      loggerService.error(
        `userMembershipPassService.insertMembershipDetails Error: ${error} - userId: ${userId} - membershipId: ${membershipId}`,
        {
          user_id: userId,
          user_membership_id: membershipId,
          category_type: categoryType,
          item_name: itemName,
          plu: plu,
          adult_qty: adultQty,
          child_qty: childQty,
          parking: parking,
          iu: iu,
          car_plate: carPlate,
          membership_photo: membershipPhoto,
          member_first_name: firstName,
          member_last_name: lastName,
          member_email: email,
          member_dob: dob,
          member_country: country,
          member_identification_no: identificationNo,
          member_phone_number: phoneNumber,
          co_member: coMember,
          valid_from: validFrom,
          valid_until: validUntil,
        }
      );
      throw new Error(
        JSON.stringify(MembershipPassErrors.createMembershipPassError())
      );
    }
  }

  async saveUserMembershipPassToDB(userId, req) {
    try {
      const userMembership = await this.createUserMembership(userId, {
        passType: req.passType,
        visualId: req.body.visualId,
        validUntil: req.body.validUntil || null,
      });

      userMembership &&
        userMembership.membership_id &&
        (await this.insertMembershipDetails(
          userId,
          userMembership.membership_id,
          {
            categoryType: req.body.categoryType,
            itemName: req.body.itemName || null,
            plu: req.body.plu || null,
            adultQty: req.body.adultQty,
            childQty: req.body.childQty,
            parking: req.body.parking === "yes" ? 1 : 0,
            iu: req.body.iu || null,
            carPlate: req.body.carPlate || null,
            membershipPhoto: null,
            firstName:
              !!req.body.member && !!req.body.member.firstName
                ? req.body.member.firstName
                : null,
            lastName:
              !!req.body.member && !!req.body.member.lastName
                ? req.body.member.lastName
                : null,
            email:
              !!req.body.member && !!req.body.member.email
                ? req.body.member.email
                : null,
            dob:
              !!req.body.member && !!req.body.member.dob
                ? req.body.member.dob
                : null,
            country:
              !!req.body.member && !!req.body.member.country
                ? req.body.member.country
                : null,
            identificationNo:
              !!req.body.member && !!req.body.member.identificationNo
                ? req.body.member.identificationNo
                : null,
            phoneNumber:
              !!req.body.member && !!req.body.member.phoneNumber
                ? req.body.member.phoneNumber
                : null,
            coMember:
              req.body.coMembers && req.body.coMembers.length > 0
                ? JSON.stringify(req.body.coMembers)
                : null,
            validFrom: !!req.body.validFrom ? req.body.validFrom : null,
            validUntil: !!req.body.validUntil ? req.body.validUntil : null,
          }
        ));
      console.log("Successfully saved user membership pass details to DB");
      return {
        membershipId: userMembership.membership_id,
      };
    } catch (error) {
      loggerService.error(
        `userMembershipPassService.saveUserMembershipPassToDB Error: ${error}`,
        req.body
      );
      throw new Error(
        JSON.stringify(MembershipPassErrors.createMembershipPassError())
      );
    }
  }

  async getPassType(req) {
    const passTypeMapping =
      req.body.migrations &&
      (await configsModel.findByConfigKey(
        "membership-passes",
        "pass-type-mapping"
      ));
    return !!passTypeMapping
      ? passTypeMapping[`${req.body.passType}`]
      : req.body.passType;
  }

  async formatMembershipData(req, existingMemberships) {
    const passTypeMapping = await this.getPassType(req);
    const newMembership = {
      name: passTypeMapping,
      visualID: req.body.visualId,
      expiry: req.body.validUntil || null,
    };

    if (existingMemberships === null) {
      return [newMembership];
    }

    //handle new format membership in Cognito
    if (Array.isArray(existingMemberships)) {
      let updatedMemberships;
      // Check if any existing membership needs to be updated based on visualId
      const membershipToUpdateIdx = existingMemberships.findIndex(
        (membership) => membership.visualID === newMembership.visualID
      );

      if (membershipToUpdateIdx >= 0) {
        existingMemberships[membershipToUpdateIdx] = newMembership;
        updatedMemberships = [...existingMemberships];
      } else {
        updatedMemberships = [...existingMemberships, newMembership];
      }
      return updatedMemberships || null;
    }

    //handle old format membership in Cognito
    if (typeof existingMemberships === "object") {
      // Check if any existing membership needs to be updated based on visualId
      return existingMemberships.visualID === newMembership.visualID
        ? [newMembership]
        : [existingMemberships, newMembership];
    }
  }

  async updateUserMembershipPassToDB(req) {
    try {
      const rows = await userModel.findByEmailMandaiIdVisualIds(
        [req.body.visualId],
        req.body.email,
        req.body.mandaiId
      );

      const userMembership = rows && rows.length > 0 ? rows[0] : undefined;

      if (!userMembership) {
        await Promise.reject(
          JSON.stringify(
            MembershipErrors.ciamMembershipUserNotFound(
              req.body.email,
              req.body.language
            )
          )
        );
      }

      let expiryDate = req.body.validUntil || undefined;
      !!userMembership.userId &&
        (await userMembershipModel.updateByUserId(userMembership.userId, {
          name: req.body.passType,
          expires_at: expiryDate,
        }));

      if (!!userMembership.membershipId) {
        const updatedRecord =
          await userMembershipDetailsModel.updateByMembershipId(
            userMembership.membershipId,
            {
              category_type: req.body.categoryType || undefined,
              item_name: req.body.itemName || undefined,
              plu: req.body.plu || undefined,
              adult_qty: req.body.adultQty || undefined,
              child_qty: req.body.childQty || undefined,
              parking: !!req.body.parking
                ? req.body.parking === "yes"
                  ? 1
                  : 0
                : undefined,
              iu: req.body.iu || undefined,
              car_plate: req.body.carPlate || undefined,
              membership_photo: undefined,
              member_first_name:
                !!req.body.member && !!req.body.member.firstName
                  ? req.body.member.firstName
                  : undefined,
              member_last_name:
                !!req.body.member && !!req.body.member.lastName
                  ? req.body.member.lastName
                  : undefined,
              member_email: req.body.newEmail || undefined,
              member_dob:
                !!req.body.member && !!req.body.member.dob
                  ? req.body.member.dob
                  : undefined,
              member_country:
                !!req.body.member && !!req.body.member.country
                  ? req.body.member.country
                  : undefined,
              member_identification_no:
                !!req.body.member && !!req.body.member.identificationNo
                  ? req.body.member.identificationNo
                  : undefined,
              member_phone_number:
                !!req.body.member && !!req.body.member.phoneNumber
                  ? req.body.member.phoneNumber
                  : undefined,
              co_member:
                req.body.coMembers && req.body.coMembers.length > 0
                  ? JSON.stringify(req.body.coMembers)
                  : undefined,
              valid_from: req.body.validFrom || undefined,
              valid_until: expiryDate,
            }
          );
        if (updatedRecord && updatedRecord.row_affected === 0) {
          await this.insertMembershipDetails(
            userMembership.userId,
            userMembership.membershipId,
            {
              categoryType: req.body.categoryType,
              itemName: req.body.itemName || null,
              plu: req.body.plu || null,
              adultQty: req.body.adultQty,
              childQty: req.body.childQty,
              parking: req.body.parking === "yes" ? 1 : 0,
              iu: req.body.iu || null,
              carPlate: req.body.carPlate || null,
              membershipPhoto: null,
              firstName:
                !!req.body.member && !!req.body.member.firstName
                  ? req.body.member.firstName
                  : null,
              lastName:
                !!req.body.member && !!req.body.member.lastName
                  ? req.body.member.lastName
                  : null,
              email:
                !!req.body.member && !!req.body.member.email
                  ? req.body.member.email
                  : null,
              dob:
                !!req.body.member && !!req.body.member.dob
                  ? req.body.member.dob
                  : null,
              country:
                !!req.body.member && !!req.body.member.country
                  ? req.body.member.country
                  : null,
              identificationNo:
                !!req.body.member && !!req.body.member.identificationNo
                  ? req.body.member.identificationNo
                  : null,
              phoneNumber:
                !!req.body.member && !!req.body.member.phoneNumber
                  ? req.body.member.phoneNumber
                  : null,
              coMember:
                req.body.coMembers && req.body.coMembers.length > 0
                  ? JSON.stringify(req.body.coMembers)
                  : null,
              validFrom: !!req.body.validFrom ? req.body.validFrom : null,
              validUntil: !!req.body.validUntil ? req.body.validUntil : null,
            }
          );
        }
      }
      console.log("Successfully updated user membership pass details in DB");
      return {
        membershipId: userMembership.membershipId,
      };
    } catch (error) {
      loggerService.error(
        `userMembershipPassService.updateUserMembershipPassToDB Error: ${error}`,
        req.body
      );
      const errorMessage = error.message ? JSON.parse(error.message) : "";
      if (errorMessage.status === "failed") {
        throw new Error(
          JSON.stringify(
            MembershipPassErrors.updateMembershipPassError(req.body.language)
          )
        );
      }
      throw new Error(error);
    }
  }

  async updateMembershipInCognito(req) {
    try {
      const cognitoUser = await cognitoService.cognitoAdminGetUserByEmail(
        req.body.email
      );

      const existingMemberships = JSON.parse(
        getOrCheck(cognitoUser, "custom:membership")
      );

      // reformat "custom:membership" to JSON array
      const updatedMemberships = this.formatMembershipData(
        req,
        existingMemberships
      );

      await cognitoService.cognitoAdminUpdateNewUser(
        [
          {
            Name: "custom:membership",
            Value: JSON.stringify(updatedMemberships),
          },
          {
            Name: "custom:vehicle_iu",
            Value: req.body.iu || "null",
          },
          {
            Name: "custom:vehicle_plate",
            Value: req.body.carPlate || "null",
          },
        ],
        req.body.email
      );
      console.log("Updated user data in Cognito");
      return {
        cognitoProceed: "success",
      };
    } catch (error) {
      loggerService.error(
        `userMembershipPassService.updateMembershipInCognito Error: ${error}`,
        req.body
      );
      JSON.stringify(
        MembershipErrors.ciamMembershipUserNotFound(
          req.body.email,
          req.body.language
        )
      );
    }
  }

  async sendSQSMessage(req, action) {
    try {
      req["apiTimer"] = req.processTimer.apiRequestTimer();
      req.apiTimer.log("UserMembershipPassService.sendSQSMessage starts");

      const data = {
        action: action,
        body: omit(req.body, ["membershipPhoto"]),
      };

      const queueUrl = process.env.SQS_QUEUE_URL;
      const command = new SendMessageCommand({
        QueueUrl: queueUrl,
        MessageBody: JSON.stringify(data),
      });

      const result = await sqsClient.send(command);
      req.apiTimer.end("UserMembershipPassService.sendSQSMessage"); // log end time
      return result;
    } catch (error) {
      req.apiTimer.end("UserMembershipPassService.sendSQSMessage"); // log end time
      loggerService.error(
        `userMembershipPassService.sendSQSMessage Error: ${error}`,
        req.body
      );
      throw new Error(
        JSON.stringify(
          MembershipPassErrors.createMembershipPassError(req.body.language)
        )
      );
    }
  }
}

module.exports = new UserMembershipPassService();
